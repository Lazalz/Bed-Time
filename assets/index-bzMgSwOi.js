(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))E(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&E(a)}).observe(document,{childList:!0,subtree:!0});function y(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function E(e){if(e.ep)return;e.ep=!0;const n=y(e);fetch(e.href,n)}})();document.addEventListener("DOMContentLoaded",function(){const M=document.getElementById("bedHour"),f=document.getElementById("bedMinute"),y=document.getElementById("bedAmPm"),E=document.getElementById("wakeHour"),e=document.getElementById("wakeMinute"),n=document.getElementById("wakeAmPm"),a=document.getElementById("result");let d=10,p=0,c=6,g=0;document.getElementById("bedHourUp").addEventListener("click",()=>{d=d%12+1,o()}),document.getElementById("bedAmPm").addEventListener("change",o),document.getElementById("wakeAmPm").addEventListener("change",()=>{o()}),document.getElementById("bedHourDown").addEventListener("click",()=>{d=d===1?12:d-1,o()}),document.getElementById("bedMinuteUp").addEventListener("click",()=>{p=(p+5)%60,o()}),document.getElementById("bedMinuteDown").addEventListener("click",()=>{p=p===0?55:p-5,o()}),document.getElementById("wakeHourUp").addEventListener("click",()=>{c=c%12+1,o()}),document.getElementById("wakeHourDown").addEventListener("click",()=>{c=c===1?12:c-1,o()}),document.getElementById("wakeMinuteUp").addEventListener("click",()=>{g=(g+5)%60,o()}),document.getElementById("wakeMinuteDown").addEventListener("click",()=>{g=g===0?55:g-5,o()});function o(){M.textContent=d.toString().padStart(2,"0"),f.textContent=p.toString().padStart(2,"0"),E.textContent=c.toString().padStart(2,"0"),e.textContent=g.toString().padStart(2,"0"),T("bed"),T("wake")}function T(t){const i=t==="bed"?d:c,m=document.getElementById(`${t}AmPm`).value,s=document.getElementById(`${t}NoonIndicator`);i===12?s.textContent=m==="AM"?"minuit":"midi":s.textContent=""}function v(t){t=(t+1440)%1440;const i=Math.floor(t/60),m=t%60,s=i>=12?"PM":"AM";return{hours:i%12||12,minutes:m,ampm:s,toString:function(){return`${this.hours}h${this.minutes.toString().padStart(2,"0")} ${this.ampm}`}}}function z(t,i){const r=(i-t)/90;if(Number.isInteger(r))return null;const L=Math.round(r),h=Math.max(1,L),B=h*90,l=t+B,u=i-B;return{optimizedWakeTime:v(l),optimizedBedTime:v(u),cycles:h}}function C(){let t=d;y.value==="PM"&&d<12?t+=12:y.value==="AM"&&d===12&&(t=0);let i=c;n.value==="PM"&&c<12?i+=12:n.value==="AM"&&c===12&&(i=0);let m=t*60+p,s=i*60+g;s<=m&&(s+=1440);const r=s-m,L=Math.floor(r/60),h=r%60,B=(r/90).toFixed(1);let l="";r<360?l="Temps de sommeil insuffisant. Essayez de dormir entre 7 et 9 heures pour une meilleure récupération.":r<420?l="Temps de sommeil légèrement insuffisant. Visez 7 à 9 heures pour une santé optimale.":r<=540?l="Temps de sommeil idéal pour un adulte. Continuez ainsi !":r<=600?l="Temps de sommeil suffisant. Attention à ne pas trop dormir non plus.":l="Temps de sommeil excessif. Une sieste dans la journée peut être plus bénéfique.",document.getElementById("sleepDuration").textContent=`${L}h${h.toString().padStart(2,"0")}`,document.getElementById("sleepCycles").textContent=B,document.getElementById("recommendation").textContent=l;const u=z(m,s),I=document.getElementById("optimization"),P=document.getElementById("optimizationWakeTime"),k=document.getElementById("optimizationBedTime");if(u){P.innerHTML=`• <strong>Option 1</strong> :  Pour <strong>${u.cycles} cycles complets</strong>, réveillez-vous à <strong>${u.optimizedWakeTime}</strong> en gardant la même heure de coucher.`;const b=s-u.cycles*90;if(b>=0)k.innerHTML=`• <strong>Option 2</strong> : Pour <strong>${u.cycles} cycles complets</strong>, couchez-vous à <strong>${u.optimizedBedTime}</strong> pour vous réveiller à l'heure prévue.`;else{const w=Math.abs(b),A=v(m-w);k.innerHTML=`• Pour <strong>${u.cycles} cycles complets</strong>, couchez-vous à <strong>${A}</strong> (soit ${w} minutes plus tôt) pour vous réveiller à l'heure prévue.`}I.style.display="block",setTimeout(()=>I.classList.add("show"),10),setTimeout(()=>I.classList.add("show"),10)}else I.style.display="none";a.style.display="block",setTimeout(()=>a.classList.add("show"),10),setTimeout(()=>a.classList.add("show"),10)}document.getElementById("calculate").addEventListener("click",C),o()});
